<project  xmlns:artifact="antlib:org.apache.maven.artifact.ant" 
	name="javaHibernate" default="jar">

	<path id="maven-ant-tasks.classpath" path="lib/maven-ant-tasks-2.0.10.jar" />
	<typedef resource="org/apache/maven/artifact/ant/antlib.xml"
	           uri="antlib:org.apache.maven.artifact.ant"
	           classpathref="maven-ant-tasks.classpath" />
	
	<artifact:pom id="mypom" file="pom.xml" />
    <property name="version" value="${mypom.version}"/>
    <property name="sourcedir" value="${basedir}/src"/>
    <property name="bindir" value="${basedir}/bin"/>
    <property name="generateddir" value="${basedir}/build"/>
    <property name="javalibrarydir" value="${basedir}/lib"/>
    <property name="jar.name" value="dpHibernate${version}.jar"/>
	<property name="destfile" value="${generateddir}/${jar.name}"/>
    <path id="libraries">
        <fileset dir="${javalibrarydir}">
            <include name="**/*.jar"/>
        </fileset>
    </path>
	
	
	<taskdef name="hibernatetool"
		classname="org.hibernate.tool.ant.HibernateToolTask"
		classpathref="libraries" />	
		
	
	<target name="jar" depends="clean" >
		<jar destfile="${destfile}">
			<fileset dir="${bindir}" />
			<fileset dir="${sourcedir}">
				<include name="**/*.xml"/>
				<exclude name="hibernate.cfg.xml"/>
				<exclude name="log4j.properties"/>
			</fileset>
		</jar>
	</target>

	<target name="clean">
        <!--delete dir="${generateddir}"/-->
        <mkdir dir="${generateddir}"/>
		<delete dir="${bindir}" failonerror="false" />
		<mkdir dir="${bindir}" />
    </target>
	
	<target name="install" depends="jar">
		  <artifact:install file="${destfile}">
		    <pom refid="mypom"/>
		  </artifact:install>
	</target>
</project>